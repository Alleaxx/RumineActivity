# Анализ форумной активности Румине
## Кратко
Приложение, которое красиво визуализирует серые и неприглядные данные форумной активности сайта в прекрасные таблицы, диаграммы и всё такое прочее. С учетом пользовательских пожеланий, разумеется.

Дает неплохое представление об активности форума https://ru-minecraft.ru за период с июля 2014 по 2021+.

Доступно по следующему адресу: <https://alleaxx.github.io/RumineActivity/>.

Инструкция по использованию находится там же.

![Диаграмма активности](https://i.ibb.co/0DgbB44/Activity2.gif)

## Возможности
- Хранение данных об активности форума ru-minecraft.ru из глубин истории;
- Преобразование непонятных данных в более-менее подготовленную статистику;
- Анализ полученной статистики;
    - По охватываемым датам, периодичности, источникам;
    - Форматирование выводимых значений;
    - Визуализация с помощью таблиц, списков, гистограмм и графиков.
- Сравнение и обзор источников активности:
    - Из чатов;
    - Из отдельных тем;
    - Только чаты, или только отдельные темы, или же всё вместе.

## Технологии
C#, .NET 5, Blazor WebAssembly, чуток SVG для диаграмм и хороший потенциал для Web-Api.

Почему именно так?
- Мне нравится C# + Blazor, и я его хорошо знаю (или же хочу хорошо знать);
- Идея приложения хорошо сочетается с этой связкой. Здесь нужен и алгоритм расчета статистики перед отображением, и, собственно, продвинутый интерфейс для визуализации рычажков, настроечек и результатов расчетов.

### Проекты
- ```RumineActivity.Core``` - основная библиотека с алгоритмом расчета активности и общими сущностями.
- ```RumineActivity.View``` - Blazor-приложение с визуализацией данных.
- ```RumineActivityAPI``` - приложение для потенциального предоставления данных по web-api, на данный момент существует только локально (хоть и переход на его использование осуществляется одной настройкой)

## Как работает
В приложении хранится много-много метаданных о постах (без, собственно, содержания и авторов постов) и форумных темах.
- Посты:
    - id
    - Дата создания
    - id содержащей темы
    - № в теме
- Темы:
    - id
    - Имя темы
    - Является ли тема чатом

Всё это можно можно проанализировать, после чего отобразить в различных формах полученный результат.
![Сравнение источников активности](https://i.ibb.co/JCBJySF/image.png)

### Как считается
#### Общая активность
ID форумного сообщения соответствует его порядковому номеру на форуме. Если из ID позднего поста вычесть ID более раннего, то получится общее количество написанных сообщений на *всем форуме* за прошедший период. Будут учтены даже удаленные сообщения.
#### Активность по темам
Каждый пост в определенный момент времени располагается в форумной теме на конкретной позиции. Эта позиция не постоянна, так как удаление сообщений в теме сдвигает позицию всех постов после него на -1. Это добавляет немножко трудностей при анализе, однако, общий принцип остаётся тем же самым.
### Источник данных
Текущие данные по постам и темам были некогда собраны и введены вручную (ужас-то какой!) в оригинальную эксель-таблицу, откуда они перекочевали в актуальную версию приложения.

Сейчас есть возможность получить эти данные куда более эффективным автоматическим путем, благо все необходимые инструменты уже созданы. Поэтому целью ближайших обновлений будет переход приложения на обновленную версию этих данных, а Excel-таблица окончательно перейдет в разряд наследия. 

## Предыстория
С 2016 года статистика по активности форума Румине базировалась в эксель-таблице. Сначала там хранились посчитанные вручную значения количества написанных постов в месяце n, затем в ней стали проводиться кое-какие вычисления (на основе разницы ID двух постов). Там же строились и графики, впоследствии выкладывавшиеся в виде картинки. В 2018 / 2019 была сделана веб-версия, которая представляла обычную html-таблицу с перенесенными значениями из экселя. Эксель таблица обновлялась раз в несколько месяцев и почти никому не показывалась, веб-вариант не обновлялся вообще (ибо занятие весьма нудное). На том дело почти и кончилось.
![Часть исходной таблицы](https://i.ibb.co/NjD36kB/image.png)
Однако проект исторического симулятора Румине оставил после себя немало добра из веб-архива, которое при желании можно было использовать для других целей, например для вычисления автоматической точной статистики! Однако исходную экселевскую книгу для такого пришлось бы полностью переделывать, и всё равно бы остались ограничения с неудобствами. Появился хороший повод написать полноценное приложение для анализа и визуализации статистики, заодно предоставив возможность всем желающим посмотреть статистику в удобном, настраиваемом виде. Сказано - сделано, и вот мы здесь.

## Планы на будущее
- *Добавление серверной части с хранением данных*;
- Еще более мудрено-функционально-естетичный интерфейс:
    - Более красивые графики;
    - Диаграммы с накоплением.
- Группировка данных;
- Учет количества просмотров тем в разное время;
- Использование более полной и точной статистики из веб-архива;
- Диаграммы с накоплением;
- Сохранение в файлы?...